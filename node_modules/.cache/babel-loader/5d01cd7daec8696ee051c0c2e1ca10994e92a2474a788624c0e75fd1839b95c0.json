{"ast":null,"code":"// src/components/Reports/ReportsList.jsx\nimport React,{useState,useEffect}from'react';import{reportsAPI}from'../../services/api';import Navbar from'../Common/Navbar';import ReportCard from'./ReportCard';import UploadReport from'./UploadReport';import ReportFilters from'./ReportFilters';import Loading from'../Common/Loading';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ReportsList=()=>{const[reports,setReports]=useState([]);const[filteredReports,setFilteredReports]=useState([]);const[loading,setLoading]=useState(true);const[showUploadModal,setShowUploadModal]=useState(false);const[filters,setFilters]=useState({date:'',vital_type:'',report_type:''});useEffect(()=>{fetchReports();},[]);useEffect(()=>{applyFilters();},[filters,reports]);const fetchReports=async()=>{try{setLoading(true);const response=await reportsAPI.getAll();setReports(response.data);setFilteredReports(response.data);}catch(err){console.error('Failed to fetch reports:',err);}finally{setLoading(false);}};const applyFilters=()=>{let filtered=[...reports];if(filters.date){filtered=filtered.filter(r=>r.date===filters.date);}if(filters.report_type){filtered=filtered.filter(r=>r.report_type===filters.report_type);}if(filters.vital_type){filtered=filtered.filter(r=>r.vitals_summary&&r.vitals_summary.includes(filters.vital_type));}setFilteredReports(filtered);};const handleFilterChange=newFilters=>{setFilters(newFilters);};const handleUploadSuccess=()=>{setShowUploadModal(false);fetchReports();};const handleDelete=async reportId=>{if(window.confirm('Are you sure you want to delete this report?')){try{await reportsAPI.delete(reportId);fetchReports();}catch(err){alert('Failed to delete report');console.error(err);}}};if(loading)return/*#__PURE__*/_jsx(Loading,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"page-container\",children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"page-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"page-header\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Reports\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Manage your medical reports and documents\"})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn-primary\",onClick:()=>setShowUploadModal(true),children:\"\\u2795 Upload Report\"})]}),/*#__PURE__*/_jsx(ReportFilters,{filters:filters,onFilterChange:handleFilterChange,reportTypes:[...new Set(reports.map(r=>r.report_type))]}),/*#__PURE__*/_jsx(\"div\",{className:\"reports-grid\",children:filteredReports.length>0?filteredReports.map(report=>/*#__PURE__*/_jsx(ReportCard,{report:report,onDelete:handleDelete},report.id)):/*#__PURE__*/_jsx(\"div\",{className:\"no-data-message\",children:/*#__PURE__*/_jsx(\"p\",{children:\"No reports found. Upload your first report to get started!\"})})})]}),showUploadModal&&/*#__PURE__*/_jsx(UploadReport,{onClose:()=>setShowUploadModal(false),onSuccess:handleUploadSuccess})]});};export default ReportsList;","map":{"version":3,"names":["React","useState","useEffect","reportsAPI","Navbar","ReportCard","UploadReport","ReportFilters","Loading","jsx","_jsx","jsxs","_jsxs","ReportsList","reports","setReports","filteredReports","setFilteredReports","loading","setLoading","showUploadModal","setShowUploadModal","filters","setFilters","date","vital_type","report_type","fetchReports","applyFilters","response","getAll","data","err","console","error","filtered","filter","r","vitals_summary","includes","handleFilterChange","newFilters","handleUploadSuccess","handleDelete","reportId","window","confirm","delete","alert","className","children","onClick","onFilterChange","reportTypes","Set","map","length","report","onDelete","id","onClose","onSuccess"],"sources":["D:/MERN STACK PROJECT/FRONTEND/HEALTH_WALLET_FRONTEND/src/components/Reports/ReportsList.jsx"],"sourcesContent":["// src/components/Reports/ReportsList.jsx\r\nimport React, { useState, useEffect } from 'react';\r\nimport { reportsAPI } from '../../services/api';\r\nimport Navbar from '../Common/Navbar';\r\nimport ReportCard from './ReportCard';\r\nimport UploadReport from './UploadReport';\r\nimport ReportFilters from './ReportFilters';\r\nimport Loading from '../Common/Loading';\r\n\r\nconst ReportsList = () => {\r\n  const [reports, setReports] = useState([]);\r\n  const [filteredReports, setFilteredReports] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [showUploadModal, setShowUploadModal] = useState(false);\r\n  const [filters, setFilters] = useState({\r\n    date: '',\r\n    vital_type: '',\r\n    report_type: '',\r\n  });\r\n\r\n  useEffect(() => {\r\n    fetchReports();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    applyFilters();\r\n  }, [filters, reports]);\r\n\r\n  const fetchReports = async () => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await reportsAPI.getAll();\r\n      setReports(response.data);\r\n      setFilteredReports(response.data);\r\n    } catch (err) {\r\n      console.error('Failed to fetch reports:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const applyFilters = () => {\r\n    let filtered = [...reports];\r\n\r\n    if (filters.date) {\r\n      filtered = filtered.filter(r => r.date === filters.date);\r\n    }\r\n\r\n    if (filters.report_type) {\r\n      filtered = filtered.filter(r => r.report_type === filters.report_type);\r\n    }\r\n\r\n    if (filters.vital_type) {\r\n      filtered = filtered.filter(r => \r\n        r.vitals_summary && r.vitals_summary.includes(filters.vital_type)\r\n      );\r\n    }\r\n\r\n    setFilteredReports(filtered);\r\n  };\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleUploadSuccess = () => {\r\n    setShowUploadModal(false);\r\n    fetchReports();\r\n  };\r\n\r\n  const handleDelete = async (reportId) => {\r\n    if (window.confirm('Are you sure you want to delete this report?')) {\r\n      try {\r\n        await reportsAPI.delete(reportId);\r\n        fetchReports();\r\n      } catch (err) {\r\n        alert('Failed to delete report');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (loading) return <Loading />;\r\n\r\n  return (\r\n    <div className=\"page-container\">\r\n      <Navbar />\r\n      \r\n      <div className=\"page-content\">\r\n        <div className=\"page-header\">\r\n          <div>\r\n            <h1>My Reports</h1>\r\n            <p>Manage your medical reports and documents</p>\r\n          </div>\r\n          <button \r\n            className=\"btn-primary\"\r\n            onClick={() => setShowUploadModal(true)}\r\n          >\r\n            âž• Upload Report\r\n          </button>\r\n        </div>\r\n\r\n        <ReportFilters \r\n          filters={filters}\r\n          onFilterChange={handleFilterChange}\r\n          reportTypes={[...new Set(reports.map(r => r.report_type))]}\r\n        />\r\n\r\n        <div className=\"reports-grid\">\r\n          {filteredReports.length > 0 ? (\r\n            filteredReports.map(report => (\r\n              <ReportCard \r\n                key={report.id} \r\n                report={report}\r\n                onDelete={handleDelete}\r\n              />\r\n            ))\r\n          ) : (\r\n            <div className=\"no-data-message\">\r\n              <p>No reports found. Upload your first report to get started!</p>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n\r\n      {showUploadModal && (\r\n        <UploadReport \r\n          onClose={() => setShowUploadModal(false)}\r\n          onSuccess={handleUploadSuccess}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ReportsList;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}